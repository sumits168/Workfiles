{
  "displayName": "MissionControl-GKE-Fluentbit",
  "dashboardFilters": [
    {
      "filterType": "RESOURCE_LABEL",
      "labelKey": "instance",
      "templateVariable": "instance",
      "valueType": "STRING_ARRAY"
    },
    {
      "filterType": "RESOURCE_LABEL",
      "labelKey": "cluster",
      "templateVariable": "cluster",
      "valueType": "STRING_ARRAY"
    }
  ],
  "description": "",
  "labels": {
    "cloud-monitoring-dashboard-importer": "",
    "goog-imported-grafana-dashboard": "",
    "goog-imported-grafana-dashboard-from-ui": "",
    "goog-imported-grafana-id": "13573",
    "goog-imported-grafana-revision": "2",
    "goog-imported-via-script": ""
  },
  "mosaicLayout": {
    "columns": 48,
    "tiles": [
      {
        "height": 15,
        "width": 48,
        "widget": {
          "title": "Logging throughput",
          "xyChart": {
            "chartOptions": {
              "displayHorizontal": false,
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (node_name)(rate(kubernetes_io:node_logs_input_bytes{monitored_resource=\"k8s_node\"}[${__interval}]))\n",
                  "unitOverride": "By"
                }
              }
            ],
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 15,
        "height": 18,
        "width": 24,
        "widget": {
          "title": "Fluent-bit input bytes/s",
          "xyChart": {
            "chartOptions": {
              "displayHorizontal": false,
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_input_bytes_total{cluster=~\"${cluster.value}\"}[${__interval}]))"
                }
              }
            ],
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 15,
        "xPos": 24,
        "height": 18,
        "width": 24,
        "widget": {
          "title": "Fluent-bit input records",
          "xyChart": {
            "chartOptions": {
              "displayHorizontal": false,
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_input_records_total{instance=~\"${instance.value}\",cluster=~\"${cluster.value}\"}[1m]))"
                }
              }
            ],
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 33,
        "height": 18,
        "width": 24,
        "widget": {
          "title": "Fluent-bit output bytes/s",
          "xyChart": {
            "chartOptions": {
              "displayHorizontal": false,
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_output_proc_bytes_total{instance=~\"${instance.value}\",cluster=~\"${cluster.value}\"}[1m]))"
                }
              }
            ],
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 33,
        "xPos": 24,
        "height": 18,
        "width": 24,
        "widget": {
          "title": "Fluent-bit output records",
          "xyChart": {
            "chartOptions": {
              "displayHorizontal": false,
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_output_proc_records_total{instance=~\"${instance.value}\", cluster=~\"${cluster.value}\"}[1m]))"
                }
              }
            ],
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 51,
        "height": 16,
        "width": 24,
        "widget": {
          "title": "Fluent-bit input files",
          "xyChart": {
            "chartOptions": {
              "displayHorizontal": false,
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_input_files_closed_total{instance=~\"${instance.value}\",cluster=~\"${cluster.value}\"}[1m]))"
                }
              },
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_input_files_opened_total{instance=~\"${instance.value}\",cluster=~\"${cluster.value}\"}[1m]))"
                }
              },
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_input_files_rotated_total{instance=~\"${instance.value}\",cluster=~\"${cluster.value}\"}[1m]))"
                }
              }
            ],
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 51,
        "xPos": 24,
        "height": 16,
        "width": 24,
        "widget": {
          "title": "Fluent-bit filters",
          "id": "",
          "xyChart": {
            "chartOptions": {
              "displayHorizontal": false,
              "mode": "COLOR",
              "showLegend": false
            },
            "dataSets": [
              {
                "breakdowns": [],
                "dimensions": [],
                "legendTemplate": "",
                "measures": [],
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "outputFullDuration": false,
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_filter_add_records_total{instance=~\"${instance.value}\"}[1m]))",
                  "unitOverride": ""
                }
              },
              {
                "breakdowns": [],
                "dimensions": [],
                "legendTemplate": "",
                "measures": [],
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "outputFullDuration": false,
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_filter_drop_records_total{instance=~\"${instance.value}\"}[1m]))",
                  "unitOverride": ""
                }
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 67,
        "height": 16,
        "width": 24,
        "widget": {
          "title": "Fluent-bit Errors Total",
          "xyChart": {
            "chartOptions": {
              "displayHorizontal": false,
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_output_errors_total{cluster=~\"${cluster.value}\"}[1m]))"
                }
              }
            ],
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 67,
        "xPos": 24,
        "height": 16,
        "width": 24,
        "widget": {
          "title": "Retries Failed Total",
          "xyChart": {
            "chartOptions": {
              "displayHorizontal": false,
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_output_retries_failed_total{cluster=~\"${cluster.value}\"}[1m]))"
                }
              }
            ],
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 83,
        "height": 16,
        "width": 48,
        "widget": {
          "title": "Retries Total",
          "xyChart": {
            "chartOptions": {
              "displayHorizontal": false,
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (instance)(rate(fluentbit_output_retries_total{cluster=~\"${cluster.value}\"}[1m]))"
                }
              }
            ],
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          }
        }
      }
    ]
  }
}